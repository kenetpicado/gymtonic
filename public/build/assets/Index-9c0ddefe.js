import{_ as q}from"./AppLayout-ed64ce15.js";import{T as D}from"./TableSection-7961ffc7.js";import{_ as v}from"./SelectForm-cafac479.js";import{m as E,g as S,p as I,o as c,h as N,w as u,b as f,a as e,c as _,i as C,F as b,t as d,d as h,O as T,n as k,j as A}from"./app-fcae524f.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"grid grid-cols-4 mb-6 gap-4"},F=e("option",{selected:"",value:""},"Todos",-1),M=["value"],R=e("option",{value:""},"Año en curso",-1),P=e("option",{value:"2023"},"2023",-1),U=e("option",{value:"2022"},"2022",-1),z=e("option",{value:"2021"},"2021",-1),J=e("th",null,"ID",-1),G=e("th",null,"Mes",-1),H=e("th",null,[h("Clientes "),e("br"),h(" registrados")],-1),K=e("th",null,[h("Planes "),e("br"),h(" contratados (aprox.)")],-1),Q=e("th",null,"Ingresos",-1),W=e("th",null,"Egresos",-1),X=e("th",null,"Ganacia",-1),Y={key:0,class:"hover:bg-gray-50"},Z={class:"badge-success"},ee={class:"badge-danger"},te={class:"bg-gray-50"},oe=e("td",null,null,-1),ne=e("td",{class:"font-bold"},"Total",-1),se={class:"font-bold"},ae={class:"font-bold"},de={class:"font-bold"},me={__name:"Index",props:{incomes:{type:Object,required:!0},expenditures:{type:Object,required:!0},concepts:{type:Object,required:!0},clients:{type:Object,required:!0},plans:{type:Object,required:!0}},setup(r){const i=r,V=[{name:"Dashboard",route:"dashboard.index"},{name:"Resumen",route:"dashboard.summary.index"}],s=E({model_id:"",year:""}),$=[{id:1,name:"Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}],p=new URLSearchParams(window.location.search);p.get("model_id")&&(s.model_id=p.get("model_id")),p.get("year")&&(s.year=p.get("year"));function L(n){const o=i.incomes.find(t=>t.month===n);return o?"C$ "+o.total.toLocaleString():"C$ 0"}function w(n){const o=i.expenditures.find(t=>t.month===n);return o?"C$ "+o.total.toLocaleString():"C$ 0"}function O(n){const o=i.incomes.find(a=>a.month===n),t=i.expenditures.find(a=>a.month===n);return o||t}function g(n){var a,m;const o=((a=i.incomes.find(l=>l.month===n))==null?void 0:a.total)??0,t=((m=i.expenditures.find(l=>l.month===n))==null?void 0:m.total)??0;return"C$ "+(o-t).toLocaleString()}const y=S(()=>i.incomes.reduce((n,o)=>n+o.total,0)),x=S(()=>i.expenditures.reduce((n,o)=>n+o.total,0));I(()=>[s.model_id,s.year],({model_id:n,year:o})=>{j()});function j(){s.model_id===""&&delete s.model_id,s.year===""&&delete s.year,T.get(route("dashboard.summary.index"),s,{preserveState:!0,preserveScroll:!0,only:["incomes","expenditures","clients","plans"],replace:!0})}return(n,o)=>(c(),N(q,{title:"Dashboard",breads:V},{default:u(()=>[f(D,null,{filters:u(()=>[e("div",B,[f(v,{modelValue:s.model_id,"onUpdate:modelValue":o[0]||(o[0]=t=>s.model_id=t),text:"Model"},{default:u(()=>[F,(c(!0),_(b,null,C(r.concepts,t=>(c(),_("option",{value:t.id},d(t.name),9,M))),256))]),_:1},8,["modelValue"]),f(v,{modelValue:s.year,"onUpdate:modelValue":o[1]||(o[1]=t=>s.year=t),text:"Año"},{default:u(()=>[R,P,U,z]),_:1},8,["modelValue"])])]),header:u(()=>[J,G,H,K,Q,W,X]),body:u(()=>[(c(),_(b,null,C($,t=>{var a,m;return c(),_(b,null,[O(t.id)?(c(),_("tr",Y,[e("td",null,d(t.id),1),e("td",null,d(t.name),1),e("td",null,d(((a=r.clients.find(l=>l.month===t.id))==null?void 0:a.total)??0),1),e("td",null,d(((m=r.plans.find(l=>l.month===t.id))==null?void 0:m.total)??0),1),e("td",null,[e("span",Z,d(L(t.id)),1)]),e("td",null,[e("span",ee,d(w(t.id)),1)]),e("td",null,[e("span",{class:k([g(t.id).includes("-")?"badge-danger":"badge-blue"])},d(g(t.id)),3)])])):A("",!0)],64)}),64)),e("tr",te,[oe,ne,e("td",null,d(r.clients.reduce((t,a)=>t+a.total,0)),1),e("td",null,d(r.plans.reduce((t,a)=>t+a.total,0)),1),e("td",se,"C$ "+d(y.value.toLocaleString()),1),e("td",ae,"C$ "+d(x.value.toLocaleString()),1),e("td",de,"C$ "+d((y.value-x.value).toLocaleString()),1)])]),_:1})]),_:1}))}};export{me as default};
