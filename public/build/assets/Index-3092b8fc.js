import{_ as q}from"./PrimaryButton-424b8710.js";import{_ as T}from"./ThePaginator-40b894e0.js";import{_ as D}from"./AppLayout-46e562f0.js";import{T as N}from"./TableSection-ebc36c78.js";import{_ as b}from"./UserInformation-2b1dfa85.js";import{c as U,D as w}from"./conceptIcons-433a5e2f.js";import{o,c as d,a as t,h as m,k as L,u as f,t as i,m as E,g as I,p as B,O as x,q as O,w as u,b as l,d as j,i as A,F as y,j as h,n as F}from"./app-93ea45e5.js";import{_ as M}from"./DateColumn-bcb5e352.js";import{_ as g}from"./InputForm-f5c87c45.js";import{t as P}from"./toast-d198886e.js";import{u as R}from"./notify-d6666c66.js";import{C as v}from"./Carbon-053ffa43.js";import{_ as z}from"./CardInfo-a36f54a5.js";import{I as H}from"./IconTrash-38ae03b9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./helpers-a3a727bb.js";import"./IconInfoCircle-7abc0e5f.js";import"./sweetalert2.all-1abbabb2.js";const G={class:"flex gap-3 font-normal text-gray-900 items-center"},J={style:{"background-color":"#eef2ff",color:"#4f46e5"},class:"rounded-full h-10 w-10 flex items-center justify-center"},K={class:"text-sm"},Q={class:"font-medium text-gray-700"},k={__name:"ConceptInformation",props:{concept:{type:Object,required:!0}},setup(r){return(c,p)=>(o(),d("div",G,[t("div",J,[(o(),m(L(f(U)[r.concept.name]??f(w))))]),t("div",K,[t("div",Q,i(r.concept.name),1)])]))}},W={class:"text-2xl font-extrabold text-gray-600 col-span-2"},X={class:"grid grid-cols-4 mb-1 gap-4"},Y={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-4"},Z=t("th",null,"Transaccion",-1),ee=t("th",null,"Fecha",-1),te=t("th",null,"Concepto",-1),oe=t("th",null,"Descripcion",-1),se=t("th",null,"Monto",-1),ae=t("th",null,"Total",-1),re=t("th",null,"Actions",-1),ne={class:"hover:bg-gray-50"},le={key:2,class:"font-normal text-gray-900"},de={class:"font-medium text-gray-700"},ie={key:0,class:"text-red-400 mt-1 text-xs"},ce={key:1,class:"text-gray-400"},ue=["onClick"],me={key:0},pe=t("td",{colspan:"7",class:"text-center"},"No data to display",-1),_e=[pe],Ie={__name:"Index",props:{finances:{type:Object,required:!0},type:{type:String,required:!0}},setup(r){const c=r,p=new URLSearchParams(window.location.search),s=E({from:p.get("from")??v.today(),to:p.get("to")??v.today(),search:p.get("search")??""}),$=I(()=>c.finances.data.reduce((n,a)=>n+a.value*a.quantity,0)),C=B.debounce(()=>{for(const n in s)s[n]||delete s[n];x.get(route("dashboard.finances.index",c.type),s,{preserveState:!0,preserveScroll:!0,only:["finances"]})},500);O(()=>s,C,{deep:!0});const _={incomes:"Ingresos",expenditures:"Egresos"},S=[{name:"Dashboard",route:"dashboard.index"},{name:_[c.type],route:"dashboard.finances.index",params:c.type}];function V(n){R().confirm(()=>{x.delete(route("dashboard.finances.destroy",[c.type,n]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{P.success("Registro eliminado correctamente!")}})},"¿Estás seguro de eliminar este registro?")}return(n,a)=>(o(),m(D,{title:_[c.type],breads:S},{default:u(()=>[l(N,null,{topbar:u(()=>[t("h1",W,i(_[c.type]),1),l(q,{type:"button",onClick:a[0]||(a[0]=e=>n.$inertia.visit(n.route("dashboard.finances.create",r.type)))},{default:u(()=>[j(" Nuevo ")]),_:1})]),filters:u(()=>[t("div",X,[l(g,{text:"Buscar",modelValue:s.search,"onUpdate:modelValue":a[1]||(a[1]=e=>s.search=e),type:"search"},null,8,["modelValue"]),l(g,{modelValue:s.from,"onUpdate:modelValue":a[2]||(a[2]=e=>s.from=e),text:"Desde",type:"date"},null,8,["modelValue"]),l(g,{modelValue:s.to,"onUpdate:modelValue":a[3]||(a[3]=e=>s.to=e),text:"Hasta",type:"date"},null,8,["modelValue"])]),t("div",Y,[l(z,{stat:{value:`C$ ${$.value.toLocaleString()}`,title:"Total"}},null,8,["stat"])])]),header:u(()=>[Z,ee,te,oe,se,ae,re]),body:u(()=>[(o(!0),d(y,null,A(r.finances.data,(e,ye)=>(o(),d("tr",ne,[t("td",null," #"+i(e.id),1),t("td",null,[l(M,{date:e.created_at},null,8,["date"])]),t("td",null,[e.incomeable?(o(),d(y,{key:0},[e.incomeable_type=="App\\Models\\Concept"?(o(),m(k,{key:0,concept:e.incomeable},null,8,["concept"])):(o(),m(b,{key:1,user:e.incomeable,type:e.incomeable_type},null,8,["user","type"]))],64)):e.expenditureable?(o(),d(y,{key:1},[e.expenditureable_type=="App\\Models\\Concept"?(o(),m(k,{key:0,concept:e.expenditureable},null,8,["concept"])):(o(),m(b,{key:1,user:e.expenditureable,type:e.expenditureable_type},null,8,["user","type"]))],64)):(o(),d("div",le,i(e.concept),1))]),t("td",null,i(e.description),1),t("td",null,[t("div",de," C$ "+i((e.value+(e.discount??0)).toLocaleString("en-US")),1),e.discount?(o(),d("div",ie," -C$ "+i(e.discount.toLocaleString("en-US")),1)):h("",!0),e.quantity>1?(o(),d("div",ce," cant. "+i(e.quantity),1)):h("",!0)]),t("td",null,[t("span",{class:F([r.type=="incomes"?"badge-blue":"badge-danger"])}," C$ "+i((e.value*e.quantity).toLocaleString("en-US")),3)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:he=>V(e.id)},[l(f(H))],8,ue)])]))),256)),r.finances.data.length==0?(o(),d("tr",me,_e)):h("",!0)]),paginator:u(()=>[l(T,{links:r.finances.links},null,8,["links"])]),_:1})]),_:1},8,["title"]))}};export{Ie as default};
