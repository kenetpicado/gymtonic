import{_ as q}from"./AppLayout-f9cfb8f2.js";import{T as k}from"./TableSection-f60b7dab.js";import{_ as v}from"./SelectForm-2841975d.js";import{m as D,j as S,p as E,o as c,b as I,w as u,d as f,c as _,k as C,F as b,a as e,t as d,f as h,O as N,n as T,e as A}from"./app-2f343102.js";import"./_plugin-vue_export-helper-c27b6911.js";const B=e("option",{selected:"",value:""},"Todos",-1),F=["value"],M=e("option",{value:""},"Año en curso",-1),R=e("option",{value:"2023"},"2023",-1),P=e("option",{value:"2022"},"2022",-1),U=e("option",{value:"2021"},"2021",-1),z=e("th",null,"ID",-1),J=e("th",null,"Mes",-1),G=e("th",null,[h("Clientes "),e("br"),h(" registrados")],-1),H=e("th",null,[h("Planes "),e("br"),h(" contratados (aprox.)")],-1),K=e("th",null,"Ingresos",-1),Q=e("th",null,"Egresos",-1),W=e("th",null,"Ganacia",-1),X={key:0,class:"hover:bg-gray-50"},Y={class:"badge-success"},Z={class:"badge-danger"},ee={class:"bg-gray-50"},te=e("td",null,null,-1),oe=e("td",{class:"font-bold"},"Total",-1),ne={class:"font-bold"},ae={class:"font-bold"},se={class:"font-bold"},ue={__name:"Index",props:{incomes:{type:Object,required:!0},expenditures:{type:Object,required:!0},concepts:{type:Object,required:!0},clients:{type:Object,required:!0},plans:{type:Object,required:!0}},setup(r){const i=r,V=[{name:"Dashboard",route:"dashboard.index"},{name:"Resumen",route:"dashboard.summary.index"}],a=D({model_id:"",year:""}),$=[{id:1,name:"Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}],p=new URLSearchParams(window.location.search);p.get("model_id")&&(a.model_id=p.get("model_id")),p.get("year")&&(a.year=p.get("year"));function L(n){const o=i.incomes.find(t=>t.month===n);return o?"C$ "+o.total.toLocaleString():"C$ 0"}function w(n){const o=i.expenditures.find(t=>t.month===n);return o?"C$ "+o.total.toLocaleString():"C$ 0"}function O(n){const o=i.incomes.find(s=>s.month===n),t=i.expenditures.find(s=>s.month===n);return o||t}function g(n){var s,m;const o=((s=i.incomes.find(l=>l.month===n))==null?void 0:s.total)??0,t=((m=i.expenditures.find(l=>l.month===n))==null?void 0:m.total)??0;return"C$ "+(o-t).toLocaleString()}const y=S(()=>i.incomes.reduce((n,o)=>n+o.total,0)),x=S(()=>i.expenditures.reduce((n,o)=>n+o.total,0));E(()=>[a.model_id,a.year],({model_id:n,year:o})=>{j()});function j(){a.model_id===""&&delete a.model_id,a.year===""&&delete a.year,N.get(route("dashboard.summary.index"),a,{preserveState:!0,preserveScroll:!0,only:["incomes","expenditures","clients","plans"],replace:!0})}return(n,o)=>(c(),I(q,{title:"Dashboard",breads:V},{default:u(()=>[f(k,null,{topbar:u(()=>[f(v,{modelValue:a.model_id,"onUpdate:modelValue":o[0]||(o[0]=t=>a.model_id=t),text:"Model"},{default:u(()=>[B,(c(!0),_(b,null,C(r.concepts,t=>(c(),_("option",{value:t.id},d(t.name),9,F))),256))]),_:1},8,["modelValue"]),f(v,{modelValue:a.year,"onUpdate:modelValue":o[1]||(o[1]=t=>a.year=t),text:"Año"},{default:u(()=>[M,R,P,U]),_:1},8,["modelValue"])]),header:u(()=>[z,J,G,H,K,Q,W]),body:u(()=>[(c(),_(b,null,C($,t=>{var s,m;return c(),_(b,null,[O(t.id)?(c(),_("tr",X,[e("td",null,d(t.id),1),e("td",null,d(t.name),1),e("td",null,d(((s=r.clients.find(l=>l.month===t.id))==null?void 0:s.total)??0),1),e("td",null,d(((m=r.plans.find(l=>l.month===t.id))==null?void 0:m.total)??0),1),e("td",null,[e("span",Y,d(L(t.id)),1)]),e("td",null,[e("span",Z,d(w(t.id)),1)]),e("td",null,[e("span",{class:T([g(t.id).includes("-")?"badge-danger":"badge-blue"])},d(g(t.id)),3)])])):A("",!0)],64)}),64)),e("tr",ee,[te,oe,e("td",null,d(r.clients.reduce((t,s)=>t+s.total,0)),1),e("td",null,d(r.plans.reduce((t,s)=>t+s.total,0)),1),e("td",ne,"C$ "+d(y.value.toLocaleString()),1),e("td",ae,"C$ "+d(x.value.toLocaleString()),1),e("td",se,"C$ "+d((y.value-x.value).toLocaleString()),1)])]),_:1})]),_:1}))}};export{ue as default};
