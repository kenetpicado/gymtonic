import{_ as N}from"./AppLayout-6457c51b.js";import{T as j}from"./TableSection-0a774322.js";import{_ as O}from"./SelectForm-71b623fe.js";import{l as A,p as f,m as D,o as a,f as I,w as d,b as y,a as e,c as l,k as v,F as x,u as P,h as w,t as n,d as g,O as R,n as T}from"./app-800d3baf.js";import"./_plugin-vue_export-helper-c27b6911.js";const B=e("h1",{class:"text-2xl font-extrabold text-gray-600 col-span-2"}," Resumen ",-1),E={class:"grid grid-cols-4 mb-6 gap-4"},M=e("option",{selected:"",value:""},"Todos",-1),U={label:"Conceptos"},z=["value"],J=e("optgroup",{label:"Otros"},[e("option",{value:"plans"},"Planes")],-1),Y=e("option",{value:""},"Año en curso",-1),G=["value"],H=e("th",null,"ID",-1),K=e("th",null,"Mes",-1),Q=e("th",null,[g("Clientes "),e("br"),g(" registrados")],-1),W=e("th",null,[g("Planes "),e("br"),g(" contratados (aprox.)")],-1),X=e("th",null,"Ingresos",-1),Z=e("th",null,"Egresos",-1),ee=e("th",null,"Ganacia",-1),te={key:0},oe=e("td",{colspan:"7",class:"text-center"}," No hay datos para mostrar ",-1),se=[oe],ne={class:"hover:bg-gray-50"},ae={class:"badge-success"},le={class:"badge-danger"},re={key:1,class:"bg-gray-50"},de=e("td",null,null,-1),ie=e("td",{class:"font-bold"},"Total",-1),ce={class:"font-bold"},ue={class:"font-bold"},me={class:"font-bold"},fe={__name:"Index",props:{incomes:{type:Object,required:!0},expenditures:{type:Object,required:!0},concepts:{type:Object,required:!0},clients:{type:Object,required:!0},plans:{type:Object,required:!0}},setup(_){const i=_,$=[{name:"Inicio",route:"dashboard.index"},{name:"Resumen",route:"dashboard.summary.index"}],S=new URLSearchParams(window.location.search),c=A({model_id:S.get("model_id")??"",year:S.get("year")??""}),k=[{id:1,name:"Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}],C=f(()=>i.incomes.reduce((s,o)=>s+o.total,0)),V=f(()=>i.expenditures.reduce((s,o)=>s+o.total,0));D(c,q,{deep:!0});function q(){let s={...c};for(const o in s)s[o]||delete s[o];R.get(route("dashboard.summary.index"),s,{preserveState:!0,preserveScroll:!0,only:["incomes","expenditures","clients","plans"],replace:!0})}const b=f(()=>{var o,t,u,L;const s=[];for(const m of k){const p=((o=i.incomes.find(r=>r.month===m.id))==null?void 0:o.total)??0,h=((t=i.expenditures.find(r=>r.month===m.id))==null?void 0:t.total)??0;p===0&&h===0||s.push({id:m.id,name:m.name,clients:((u=i.clients.find(r=>r.month===m.id))==null?void 0:u.total)??0,plans:((L=i.plans.find(r=>r.month===m.id))==null?void 0:L.total)??0,income:"C$ "+p.toLocaleString(),expenditure:"C$ "+h.toLocaleString(),renevue:"C$ "+(p-h).toLocaleString(),revenue_class:p-h>0?"badge-success":"badge-danger"})}return s}),F=Array.from({length:4},(s,o)=>new Date().getFullYear()-o).filter(s=>s!==new Date().getFullYear());return(s,o)=>(a(),I(N,{title:"Resumen",breads:$},{default:d(()=>[y(j,null,{topbar:d(()=>[B]),filters:d(()=>[e("div",E,[y(O,{modelValue:c.model_id,"onUpdate:modelValue":o[0]||(o[0]=t=>c.model_id=t),text:"Concepto"},{default:d(()=>[M,e("optgroup",U,[(a(!0),l(x,null,v(_.concepts,t=>(a(),l("option",{value:t.id},n(t.name),9,z))),256))]),J]),_:1},8,["modelValue"]),y(O,{modelValue:c.year,"onUpdate:modelValue":o[1]||(o[1]=t=>c.year=t),text:"Año"},{default:d(()=>[Y,(a(!0),l(x,null,v(P(F),t=>(a(),l("option",{value:t},n(t),9,G))),256))]),_:1},8,["modelValue"])])]),header:d(()=>[H,K,Q,W,X,Z,ee]),body:d(()=>[b.value.length==0?(a(),l("tr",te,se)):w("",!0),(a(!0),l(x,null,v(b.value,t=>(a(),l("tr",ne,[e("td",null,n(t.id),1),e("td",null,n(t.name),1),e("td",null,n(t.clients),1),e("td",null,n(t.plans),1),e("td",null,[e("span",ae,n(t.income),1)]),e("td",null,[e("span",le,n(t.expenditure),1)]),e("td",null,[e("span",{class:T(t.revenue_class)},n(t.renevue),3)])]))),256)),b.value.length>0?(a(),l("tr",re,[de,ie,e("td",null,n(_.clients.reduce((t,u)=>t+u.total,0)),1),e("td",null,n(_.plans.reduce((t,u)=>t+u.total,0)),1),e("td",ce,"C$ "+n(C.value.toLocaleString()),1),e("td",ue,"C$ "+n(V.value.toLocaleString()),1),e("td",me,"C$ "+n((C.value-V.value).toLocaleString()),1)])):w("",!0)]),_:1})]),_:1}))}};export{fe as default};
