import{_ as w}from"./PrimaryButton-ee68edb4.js";import{_ as D}from"./ThePaginator-734271e7.js";import{_ as I}from"./AppLayout-69e75404.js";import{T as L}from"./TableSection-1cddbf40.js";import{_ as k}from"./UserInformation-afc1de23.js";import{c as E,D as O}from"./conceptIcons-e7621981.js";import{o,c as a,a as t,f as d,g as B,u as v,t as l,l as j,q as A,O as $,m as F,p as P,w as m,b as c,d as M,k as g,F as p,h as b,n as R}from"./app-5a04f978.js";import{_ as z}from"./DateColumn-07c24458.js";import{_ as x}from"./InputForm-4cad8d49.js";import{t as H}from"./toast-0c928852.js";import{u as G}from"./notify-59a47c94.js";import{C}from"./Carbon-053ffa43.js";import{_ as S}from"./CardInfo-08882826.js";import{I as J}from"./IconTrash-906172b9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./helpers-70796b54.js";import"./IconInfoCircle-20765699.js";import"./sweetalert2.all-e8f3582c.js";const K={class:"flex gap-3 font-normal text-gray-900 items-center"},Q={style:{"background-color":"#eef2ff",color:"#4f46e5"},class:"rounded-full h-10 w-10 flex items-center justify-center"},W={class:"text-sm"},X={class:"font-medium text-gray-700"},V={__name:"ConceptInformation",props:{concept:{type:Object,required:!0}},setup(r){return(n,_)=>(o(),a("div",K,[t("div",Q,[(o(),d(B(v(E)[r.concept.name]??v(O))))]),t("div",W,[t("div",X,l(r.concept.name),1)])]))}},Y={class:"text-2xl font-extrabold text-gray-600"},Z={class:"grid grid-cols-4 mb-1 gap-4"},ee={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-4"},te=t("th",null,"Transaccion",-1),oe=t("th",null,"Fecha",-1),se=t("th",null,"Concepto",-1),ae=t("th",null,"Descripcion",-1),re=t("th",null,"Monto",-1),ne=t("th",null,"Total",-1),le=t("th",null,"Actions",-1),ie={class:"hover:bg-gray-50"},ce={key:2,class:"font-normal text-gray-900"},de={class:"font-medium text-gray-700"},ue={key:0,class:"text-red-400 mt-1 text-xs"},me={key:1,class:"text-gray-400"},pe=["onClick"],_e={key:0},ye=t("td",{colspan:"7",class:"text-center"},"No data to display",-1),he=[ye],Ee={__name:"Index",props:{finances:{type:Object,required:!0},type:{type:String,required:!0},total:{type:Number,required:!0},plans_total:{type:Number,required:!1},concepts:{type:Object,required:!1}},setup(r){const n=r,_=new URLSearchParams(window.location.search),s=j({from:_.get("from")??C.today(),to:_.get("to")??C.today(),search:_.get("search")??""}),q=A.debounce(()=>{for(const u in s)s[u]||delete s[u];$.get(route("dashboard.finances.index",n.type),s,{preserveState:!0,preserveScroll:!0,only:["finances","total","plans_total","concepts"]})},500);F(()=>s,q,{deep:!0});const y={incomes:"Ingresos",expenditures:"Egresos"},N=[{name:"Inicio",route:"dashboard.index"},{name:y[n.type],route:"dashboard.finances.index",params:n.type}];function T(u){G().confirm(()=>{$.delete(route("dashboard.finances.destroy",[n.type,u]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{H.success("Registro eliminado correctamente!")}})},"¿Estás seguro de eliminar este registro?")}const U=P(()=>[{title:"Total",value:`C$ ${n.total.toLocaleString()}`},{title:"Registros",value:`${n.finances.total}`},{title:"Planes",value:`${n.plans_total}`}]);return(u,i)=>(o(),d(I,{title:y[n.type],breads:N},{default:m(()=>[c(L,null,{topbar:m(()=>[t("h1",Y,l(y[n.type]),1),c(w,{type:"button",onClick:i[0]||(i[0]=e=>u.$inertia.visit(u.route("dashboard.finances.create",r.type)))},{default:m(()=>[M(" Nuevo ")]),_:1})]),filters:m(()=>[t("div",Z,[c(x,{text:"Buscar",modelValue:s.search,"onUpdate:modelValue":i[1]||(i[1]=e=>s.search=e),type:"search"},null,8,["modelValue"]),c(x,{modelValue:s.from,"onUpdate:modelValue":i[2]||(i[2]=e=>s.from=e),text:"Desde",type:"date"},null,8,["modelValue"]),c(x,{modelValue:s.to,"onUpdate:modelValue":i[3]||(i[3]=e=>s.to=e),text:"Hasta",type:"date"},null,8,["modelValue"])]),t("div",ee,[(o(!0),a(p,null,g(U.value,e=>(o(),d(S,{stat:e},null,8,["stat"]))),256)),(o(!0),a(p,null,g(r.concepts.map(e=>{var h,f;return{title:((h=e.incomeable)==null?void 0:h.name)||((f=e.expenditureable)==null?void 0:f.name),value:e.total}}),e=>(o(),d(S,{stat:e},null,8,["stat"]))),256))])]),header:m(()=>[te,oe,se,ae,re,ne,le]),body:m(()=>[(o(!0),a(p,null,g(r.finances.data,(e,h)=>(o(),a("tr",ie,[t("td",null," #"+l(e.id),1),t("td",null,[c(z,{date:e.created_at},null,8,["date"])]),t("td",null,[e.incomeable?(o(),a(p,{key:0},[e.incomeable_type=="App\\Models\\Concept"?(o(),d(V,{key:0,concept:e.incomeable},null,8,["concept"])):(o(),d(k,{key:1,user:e.incomeable,type:e.incomeable_type},null,8,["user","type"]))],64)):e.expenditureable?(o(),a(p,{key:1},[e.expenditureable_type=="App\\Models\\Concept"?(o(),d(V,{key:0,concept:e.expenditureable},null,8,["concept"])):(o(),d(k,{key:1,user:e.expenditureable,type:e.expenditureable_type},null,8,["user","type"]))],64)):(o(),a("div",ce,l(e.concept),1))]),t("td",null,l(e.description),1),t("td",null,[t("div",de," C$ "+l((e.value+(e.discount??0)).toLocaleString("en-US")),1),e.discount?(o(),a("div",ue," -C$ "+l(e.discount.toLocaleString("en-US")),1)):b("",!0),e.quantity>1?(o(),a("div",me," cant. "+l(e.quantity),1)):b("",!0)]),t("td",null,[t("span",{class:R([r.type=="incomes"?"badge-blue":"badge-danger"])}," C$ "+l((e.value*e.quantity).toLocaleString("en-US")),3)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:f=>T(e.id)},[c(v(J))],8,pe)])]))),256)),r.finances.data.length==0?(o(),a("tr",_e,he)):b("",!0)]),paginator:m(()=>[c(D,{links:r.finances.links},null,8,["links"])]),_:1})]),_:1},8,["title"]))}};export{Ee as default};
