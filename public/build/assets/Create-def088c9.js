import{C as g}from"./Carbon-053ffa43.js";import{P as D}from"./Plan-b784bdd2.js";import{_ as p}from"./InputForm-2558843a.js";import{_ as $}from"./SelectForm-6210dbc5.js";import{_ as q}from"./FormSection-d5d1cdc8.js";import{_ as B}from"./PrimaryButton-2219454a.js";import{_ as F}from"./SecondaryButton-fc06f65f.js";import{_ as N}from"./AppLayout-875059f4.js";import{w as j,c as L}from"./helpers-3c1b81c1.js";import{t as T}from"./toast-756d2dff.js";import{f as h,T as E,g as P,o as l,h as C,w as s,a as d,b as n,d as y,t as i,c as m,u as o,F as f,j as v,i as S,n as I}from"./app-02905ccf.js";import{p as O}from"./periodLabel-28cc2bc8.js";import{_ as U}from"./Checkbox-30b1dbdc.js";import"./_plugin-vue_export-helper-c27b6911.js";const z=d("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Plan ",-1),G={class:"max-w-7xl mx-auto py-10 sm:px-6 lg:px-8"},Y=d("div",null," El plan se encuentra activo, por lo que se asume un pago adelantado. ",-1),H=["value"],J=d("option",{value:"",disabled:"",selected:""},"Select a option",-1),K=["value"],M={class:"block col-span-4"},Q={class:"col-span-4 text-lg font-medium text-gray-900"},ue={__name:"Create",props:{services:{type:Object,required:!1},plan:{type:Object,required:!1},customer:{type:Object,required:!0},isCurrentActive:{type:Boolean,required:!0}},setup(u){const r=u,_=h([]),c=h(!1),e=E(new D(r.plan,r.services[0].id,r.isCurrentActive));let x=null;const w=[{name:"Inicio",route:"dashboard.index"},{name:"Clientes",route:"dashboard.customers.index"},{name:"Pagar",route:"dashboard.customers.plans.create",params:[r.customer.id]}],k=P(()=>L({period:e.period,discount:e.discount},_.value)),V=P(()=>(r.isCurrentActive||c.value?x=e.end_date:x=e.start_date,new g(x).addPeriod(parseInt(e.period)).addDays(r.isCurrentActive||c.value?0:-1).format("Y-m-d")));j(e,r.services,_);function A(){e.price=k.value,e.end_date=V.value,e.post(route("dashboard.customers.plans.store",r.customer.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T.success("Plan created successfully!")}})}return(b,a)=>(l(),C(N,{title:"Customer",breads:w},{header:s(()=>[z]),default:s(()=>[d("div",G,[n(q,{onSubmitted:A},{title:s(()=>[y(" Informacion del plan ")]),description:s(()=>[d("div",null," Cliente: "+i(r.customer.name),1),u.isCurrentActive?(l(),m(f,{key:0},[Y,d("div",null," La fecha de fin del plan se actualizara en funcion de la fecha anterior: "+i(o(g).create(u.plan.end_date).format("d/m/Y"))+" y el periodo seleccionado: "+i(o(e).period)+" dias. ",1)],64)):v("",!0)]),form:s(()=>[n($,{modelValue:o(e).service_id,"onUpdate:modelValue":a[0]||(a[0]=t=>o(e).service_id=t),text:"Service",name:"service_id"},{default:s(()=>[(l(!0),m(f,null,S(u.services,t=>(l(),m("option",{value:t.id},i(t.name),9,H))),256))]),_:1},8,["modelValue"]),n($,{modelValue:o(e).period,"onUpdate:modelValue":a[1]||(a[1]=t=>o(e).period=t),text:"Period"},{default:s(()=>[J,(l(!0),m(f,null,S(_.value,t=>(l(),m("option",{value:t.period},i(o(O)[t.period])+" - "+i(t.value)+" C$ ",9,K))),256))]),_:1},8,["modelValue"]),u.isCurrentActive?v("",!0):(l(),m(f,{key:0},[u.plan?(l(),C(U,{key:0,checked:c.value,"onUpdate:checked":a[2]||(a[2]=t=>c.value=t),text:"Continuar el plan anterior",class:"col-span-4"},null,8,["checked"])):v("",!0),c.value?v("",!0):(l(),C(p,{key:1,text:"Start Date",modelValue:o(e).start_date,"onUpdate:modelValue":a[3]||(a[3]=t=>o(e).start_date=t),type:"date"},null,8,["modelValue"]))],64)),n(p,{text:"End Date",modelValue:V.value,"onUpdate:modelValue":a[4]||(a[4]=t=>V.value=t),type:"date",disabled:""},null,8,["modelValue"]),n(p,{text:"Discount",modelValue:o(e).discount,"onUpdate:modelValue":a[5]||(a[5]=t=>o(e).discount=t),type:"number"},null,8,["modelValue"]),n(p,{text:"Note",modelValue:o(e).note,"onUpdate:modelValue":a[6]||(a[6]=t=>o(e).note=t)},null,8,["modelValue"]),d("div",M,[n(U,{checked:o(e).save_note,"onUpdate:checked":a[7]||(a[7]=t=>o(e).save_note=t),text:"Guardar en notas"},null,8,["checked"])]),d("div",Q," Total: C$ "+i(k.value),1)]),actions:s(()=>[n(F,{onClick:a[8]||(a[8]=t=>b.$inertia.visit(b.$page.props.urlPrev))},{default:s(()=>[y(" Cancelar ")]),_:1}),n(B,{class:I({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:s(()=>[y(" Guardar ")]),_:1},8,["class","disabled"])]),_:1})])]),_:1}))}};export{ue as default};
