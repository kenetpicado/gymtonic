import{_ as D}from"./DateColumn-8cccff53.js";import{_ as L}from"./DialogModal-67190315.js";import{_ as y}from"./InputForm-f8c2342d.js";import{_ as S}from"./PrimaryButton-045970ee.js";import{_ as B}from"./SecondaryButton-47d90010.js";import{T as F}from"./TableSection-18e4a448.js";import{_ as O}from"./ThePaginator-759527f3.js";import{C as P,_ as R}from"./AppLayout-d2bd9a80.js";import{u as j}from"./notify-e8f933fb.js";import{t as g}from"./toast-4b6ad305.js";import{j as V,l as M,T as z,m as A,o as u,f as G,w as n,b as s,d as v,t as i,u as l,a as t,c as p,k as C,F as k,h as $,O as q,n as H}from"./app-20f6db79.js";import{_ as J}from"./SelectForm-9c893b23.js";import{I as K}from"./IconPencil-d2f0c55e.js";import{I as Q}from"./IconTrash-03b6e6fd.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sweetalert2.all-65002510.js";const W={class:"text-lg font-medium text-gray-900 mb-2"},X={class:"grid grid-cols-4 mb-1 gap-4"},Y=["value"],Z={class:"text-2xl font-extrabold text-gray-600"},ee=t("th",null,"Fecha",-1),te=t("th",null,"Descripcion",-1),oe=t("th",null,"Monto",-1),ae=t("th",null,"Total",-1),se=t("th",null,"Acciones",-1),re={class:"hover:bg-gray-50"},ne={class:"font-medium text-gray-700"},le={key:0,class:"text-gray-400"},ie={class:"flex gap-4"},de=["onClick"],ce=["onClick"],ue={key:0},me=t("td",{colspan:"5",class:"text-center"}," No hay datos para mostrar ",-1),pe=[me],Ue={__name:"Show",props:{concept:{type:Object,required:!0},records:{type:Object,required:!0},type:{type:String,required:!0}},setup(d){const m=d,_=V(!1),f=V(!0),b={incomes:"Ingresos",expenditures:"Egresos"},w=new URLSearchParams(window.location.search),c=M({type:w.get("type")??m.type}),N=[{name:"Inicio",route:"dashboard.index"},{name:"Conceptos",route:"dashboard.concepts.index"},{name:m.concept.name,route:"dashboard.concepts.show",params:[m.concept.id]}],o=z({id:null,quantity:1,value:0,description:"",created_at:P.today(),model_id:m.concept.id});function U(r){o.id=r.id,o.quantity=r.quantity,o.value=r.value,o.description=r.description,f.value=!1,_.value=!0}function T(r){j().confirm(()=>{q.delete(route(`dashboard.${c.type}.destroy`,r),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.success("Registro eliminado correctamente!")}})},"¿Estás seguro de eliminar este registro?")}function E(){f.value?o.post(route(`dashboard.${c.type}.store`),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.success("Registro creado correctamente!"),h()}}):o.put(route(`dashboard.${c.type}.update`,o.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g.success("Registro actualizado correctamente!"),h()}})}function h(){o.reset(),f.value=!0,_.value=!1}return A(()=>c,()=>{let r={...route().params,...c};for(const a in r)(!r[a]||r.concept)&&delete r[a];q.get(route("dashboard.concepts.show",m.concept.id),r,{preserveState:!0,preserveScroll:!0,only:["records","type"],replace:!0})},{deep:!0}),(r,a)=>(u(),G(R,{title:"Dashboard",breads:N},{default:n(()=>[s(L,{show:_.value},{title:n(()=>[v(i(f.value?"Nuevo":"Editar"),1)]),content:n(()=>[s(y,{text:"Descripción",name:"description",modelValue:l(o).description,"onUpdate:modelValue":a[0]||(a[0]=e=>l(o).description=e),autocomplete:"on"},null,8,["modelValue"]),s(y,{text:"Cantidad",name:"quantity",modelValue:l(o).quantity,"onUpdate:modelValue":a[1]||(a[1]=e=>l(o).quantity=e),type:"number"},null,8,["modelValue"]),s(y,{text:"Monto",name:"value",modelValue:l(o).value,"onUpdate:modelValue":a[2]||(a[2]=e=>l(o).value=e),type:"number"},null,8,["modelValue"]),s(y,{text:"Fecha",name:"created_at",modelValue:l(o).created_at,"onUpdate:modelValue":a[3]||(a[3]=e=>l(o).created_at=e),type:"date"},null,8,["modelValue"]),t("div",W," Total: C$ "+i((l(o).quantity*l(o).value).toLocaleString("en-US")),1)]),footer:n(()=>[s(B,{onClick:h},{default:n(()=>[v(" Cancelar ")]),_:1}),s(S,{type:"button",onClick:E},{default:n(()=>[v(" Guardar ")]),_:1})]),_:1},8,["show"]),s(F,null,{filters:n(()=>[t("div",X,[s(J,{text:"Tipo",modelValue:c.type,"onUpdate:modelValue":a[4]||(a[4]=e=>c.type=e)},{default:n(()=>[(u(),p(k,null,C(b,(e,x)=>t("option",{value:x},i(e),9,Y)),64))]),_:1},8,["modelValue"])])]),topbar:n(()=>[t("h2",Z,i(b[d.type])+": "+i(d.concept.name),1),s(S,{type:"button",onClick:a[5]||(a[5]=e=>_.value=!0)},{default:n(()=>[v(" Nuevo ")]),_:1})]),header:n(()=>[ee,te,oe,ae,se]),body:n(()=>[(u(!0),p(k,null,C(d.records.data,(e,x)=>(u(),p("tr",re,[t("td",null,[s(D,{date:e.created_at},null,8,["date"])]),t("td",null,i(e.description),1),t("td",null,[t("div",ne," C$ "+i(e.value.toLocaleString("en-US")),1),e.quantity>1?(u(),p("div",le," Cant. "+i(e.quantity),1)):$("",!0)]),t("td",null,[t("span",{class:H(d.type=="income"?"badge-success":"badge-danger")}," C$ "+i((e.value*e.quantity).toLocaleString("en-US")),3)]),t("td",null,[t("div",ie,[t("span",{tooltip:"Editar",role:"button",onClick:I=>U(e)},[s(l(K))],8,de),t("span",{tooltip:"Eliminar",role:"button",onClick:I=>T(e.id)},[s(l(Q))],8,ce)])])]))),256)),d.records.data.length==0?(u(),p("tr",ue,pe)):$("",!0)]),paginator:n(()=>[s(O,{links:d.records.links},null,8,["links"])]),_:1})]),_:1}))}};export{Ue as default};
