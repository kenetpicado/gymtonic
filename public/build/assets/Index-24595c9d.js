import{_ as q}from"./AppLayout-46e562f0.js";import{T as j}from"./TableSection-ebc36c78.js";import{_ as S}from"./SelectForm-68f854da.js";import{m as k,g as C,q as D,o as m,h as N,w as c,b as h,a as e,c as _,i as V,F as b,t as s,d as p,O as R,n as T,j as A}from"./app-93ea45e5.js";import"./_plugin-vue_export-helper-c27b6911.js";const B=e("h1",{class:"text-2xl font-extrabold text-gray-600 col-span-2"}," Resumen ",-1),E={class:"grid grid-cols-4 mb-6 gap-4"},F=e("option",{selected:"",value:""},"Todos",-1),I=["value"],P=e("option",{value:""},"Año en curso",-1),M=e("option",{value:"2023"},"2023",-1),U=e("option",{value:"2022"},"2022",-1),z=e("option",{value:"2021"},"2021",-1),J=e("th",null,"ID",-1),G=e("th",null,"Mes",-1),H=e("th",null,[p("Clientes "),e("br"),p(" registrados")],-1),K=e("th",null,[p("Planes "),e("br"),p(" contratados (aprox.)")],-1),Q=e("th",null,"Ingresos",-1),W=e("th",null,"Egresos",-1),X=e("th",null,"Ganacia",-1),Y={key:0,class:"hover:bg-gray-50"},Z={class:"badge-success"},ee={class:"badge-danger"},te={class:"bg-gray-50"},oe=e("td",null,null,-1),ne=e("td",{class:"font-bold"},"Total",-1),se={class:"font-bold"},ae={class:"font-bold"},de={class:"font-bold"},me={__name:"Index",props:{incomes:{type:Object,required:!0},expenditures:{type:Object,required:!0},concepts:{type:Object,required:!0},clients:{type:Object,required:!0},plans:{type:Object,required:!0}},setup(u){const i=u,$=[{name:"Dashboard",route:"dashboard.index"},{name:"Resumen",route:"dashboard.summary.index"}],g=new URLSearchParams(window.location.search),d=k({model_id:g.get("model_id")??"",year:g.get("year")??""}),w=[{id:1,name:"Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}];function f(n,o){var r;const a=(o==="income"?i.incomes:i.expenditures).find(l=>l.month===n);return a?`C$ ${((r=a.total)==null?void 0:r.toLocaleString())??0}`:"C$ 0"}function L(n){return i.incomes.some(o=>o.month===n)||i.expenditures.some(o=>o.month===n)}function x(n){var a,r;const o=((a=i.incomes.find(l=>l.month===n))==null?void 0:a.total)??0,t=((r=i.expenditures.find(l=>l.month===n))==null?void 0:r.total)??0;return"C$ "+(o-t).toLocaleString()}const y=C(()=>i.incomes.reduce((n,o)=>n+o.total,0)),v=C(()=>i.expenditures.reduce((n,o)=>n+o.total,0));D(d,O,{deep:!0});function O(){for(const n in d)d[n]===""&&delete d[n];R.get(route("dashboard.summary.index"),d,{preserveState:!0,preserveScroll:!0,only:["incomes","expenditures","clients","plans"],replace:!0})}return(n,o)=>(m(),N(q,{title:"Dashboard",breads:$},{default:c(()=>[h(j,null,{topbar:c(()=>[B]),filters:c(()=>[e("div",E,[h(S,{modelValue:d.model_id,"onUpdate:modelValue":o[0]||(o[0]=t=>d.model_id=t),text:"Concepto"},{default:c(()=>[F,(m(!0),_(b,null,V(u.concepts,t=>(m(),_("option",{value:t.id},s(t.name),9,I))),256))]),_:1},8,["modelValue"]),h(S,{modelValue:d.year,"onUpdate:modelValue":o[1]||(o[1]=t=>d.year=t),text:"Año"},{default:c(()=>[P,M,U,z]),_:1},8,["modelValue"])])]),header:c(()=>[J,G,H,K,Q,W,X]),body:c(()=>[(m(),_(b,null,V(w,t=>{var a,r;return m(),_(b,null,[L(t.id)?(m(),_("tr",Y,[e("td",null,s(t.id),1),e("td",null,s(t.name),1),e("td",null,s(((a=u.clients.find(l=>l.month===t.id))==null?void 0:a.total)??0),1),e("td",null,s(((r=u.plans.find(l=>l.month===t.id))==null?void 0:r.total)??0),1),e("td",null,[e("span",Z,s(f(t.id,"income")),1)]),e("td",null,[e("span",ee,s(f(t.id,"expenditure")),1)]),e("td",null,[e("span",{class:T([x(t.id).includes("-")?"badge-danger":"badge-blue"])},s(x(t.id)),3)])])):A("",!0)],64)}),64)),e("tr",te,[oe,ne,e("td",null,s(u.clients.reduce((t,a)=>t+a.total,0)),1),e("td",null,s(u.plans.reduce((t,a)=>t+a.total,0)),1),e("td",se,"C$ "+s(y.value.toLocaleString()),1),e("td",ae,"C$ "+s(v.value.toLocaleString()),1),e("td",de,"C$ "+s((y.value-v.value).toLocaleString()),1)])]),_:1})]),_:1}))}};export{me as default};
