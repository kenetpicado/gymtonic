import{_ as G}from"./AppLayout-0cb1b585.js";import{_ as w}from"./FormSection-28c5426d.js";import{h as I,T as O,j as D,o as n,b as T,w as r,a as u,d as s,f as d,u as a,i as j,n as N,c as i,F as b,k as B,t as f,O as P}from"./app-255317fc.js";import{_ as m}from"./InputForm-a774d690.js";import{_ as V}from"./PrimaryButton-275c7df4.js";import{_ as x}from"./SelectForm-29f4818e.js";import{_ as F}from"./SecondaryButton-f81cfa04.js";import{S as q}from"./SectionBorder-ea0b277b.js";import{C as L}from"./Carbon-053ffa43.js";import{t as E}from"./toast-44a1761e.js";import{w as M,c as H}from"./helpers-8795bc98.js";import{P as A}from"./Plan-b784bdd2.js";import{p as J}from"./periodLabel-28cc2bc8.js";import{_ as K}from"./Checkbox-86ab800b.js";import"./_plugin-vue_export-helper-c27b6911.js";const Q={class:"max-w-7xl mx-auto py-10 sm:px-6 lg:px-8"},R=u("option",{value:"F"},"Femenino",-1),W=u("option",{value:"M"},"Masculino",-1),X={key:0},Y={key:1},Z=u("span",{class:"block mt-2"},null,-1),ee=u("br",null,null,-1),te={key:1},oe=["value"],ae=u("option",{value:"",disabled:"",selected:""},"Select a option",-1),se=["value"],re={class:"block col-span-4"},le={class:"col-span-4 text-lg font-medium text-gray-900"},Ce={__name:"Create",props:{customer:{type:Object,required:!1},isNew:{type:Boolean,default:!0},services:{type:Object,required:!0}},setup(c){var C,h,k,S,$,U;const l=c,v=I([]),e=O({id:((C=l.customer)==null?void 0:C.id)??null,name:((h=l.customer)==null?void 0:h.name)??"",phone:((k=l.customer)==null?void 0:k.phone)??"",birth_date:((S=l.customer)==null?void 0:S.birth_date)??"",gender:(($=l.customer)==null?void 0:$.gender)??"F",...new A((U=l.customer)==null?void 0:U.plan,l.services[0].id)}),z=[{name:"Dashboard",route:"dashboard.index"},{name:"Clientes",route:"dashboard.customers.index"},{name:l.isNew?"Crear":"Editar",route:"dashboard.customers.create"}],g=D(()=>H({period:e.period,discount:e.discount},v.value));M(e,l.services,v);const _=D(()=>L.create(e.start_date).addPeriod(parseInt(e.period)).addDays(-1).format());function y(){e.price=g.value,e.end_date=_.value,l.isNew?e.post(route("dashboard.customers.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{E.success("Cliente creado correctamente!"),P.get(route("dashboard.customers.index"))}}):e.put(route("dashboard.customers.update",e.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{E.success("Cliente actualizado correctamente!"),P.get(route("dashboard.customers.index"))}})}return(p,o)=>(n(),T(G,{title:"Customer",breads:z},{default:r(()=>[u("div",Q,[s(w,{onSubmitted:y},{title:r(()=>[d(" Informacion del Cliente ")]),description:r(()=>[d(" Datos personales del cliente ")]),form:r(()=>[s(m,{text:"Name",modelValue:a(e).name,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).name=t)},null,8,["modelValue"]),s(m,{text:"Phone",modelValue:a(e).phone,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).phone=t),type:"number"},null,8,["modelValue"]),s(m,{text:"Birth Date",modelValue:a(e).birth_date,"onUpdate:modelValue":o[2]||(o[2]=t=>a(e).birth_date=t),type:"date"},null,8,["modelValue"]),s(x,{modelValue:a(e).gender,"onUpdate:modelValue":o[3]||(o[3]=t=>a(e).gender=t),text:"Gender"},{default:r(()=>[R,W]),_:1},8,["modelValue"])]),actions:r(()=>[s(a(j),{href:p.route("dashboard.customers.index")},{default:r(()=>[s(F,null,{default:r(()=>[d(" Cancelar ")]),_:1})]),_:1},8,["href"]),s(V,{class:N({"opacity-25":a(e).processing}),disabled:a(e).processing},{default:r(()=>[d(" Guardar ")]),_:1},8,["class","disabled"])]),_:1}),s(q),s(w,{onSubmitted:y},{title:r(()=>[d(" Informacion del Plan ")]),description:r(()=>[c.customer?(n(),i(b,{key:0},[c.customer.plan?(n(),i("div",Y,[d(" El usuario tiene un plan existente, se actualizará con los datos introducidos y también se actualizará el ingreso correspondiente. "),Z,d(" Si en cambio desea crear un nuevo plan "),ee,s(V,{class:"mt-4",onClick:o[4]||(o[4]=t=>p.$inertia.visit(p.route("dashboard.customers.plans.create",c.customer.id)))},{default:r(()=>[d(" Haga click aqui ")]),_:1})])):(n(),i("div",X," El usuario no tiene un plan creado, se procederá a crear uno nuevo con los datos ingresados. "))],64)):(n(),i("div",te," Ingrese los datos del plan para el cliente. "))]),form:r(()=>[s(x,{modelValue:a(e).service_id,"onUpdate:modelValue":o[5]||(o[5]=t=>a(e).service_id=t),text:"Service",name:"service_id"},{default:r(()=>[(n(!0),i(b,null,B(c.services,t=>(n(),i("option",{value:t.id},f(t.name),9,oe))),256))]),_:1},8,["modelValue"]),s(x,{modelValue:a(e).period,"onUpdate:modelValue":o[6]||(o[6]=t=>a(e).period=t),text:"Period"},{default:r(()=>[ae,(n(!0),i(b,null,B(v.value,t=>(n(),i("option",{value:t.period},f(a(J)[t.period])+" - C$ "+f(t.value),9,se))),256))]),_:1},8,["modelValue"]),s(m,{text:"Start Date",modelValue:a(e).start_date,"onUpdate:modelValue":o[7]||(o[7]=t=>a(e).start_date=t),type:"date"},null,8,["modelValue"]),s(m,{text:"End Date",modelValue:_.value,"onUpdate:modelValue":o[8]||(o[8]=t=>_.value=t),type:"date",disabled:""},null,8,["modelValue"]),s(m,{text:"Discount",modelValue:a(e).discount,"onUpdate:modelValue":o[9]||(o[9]=t=>a(e).discount=t),type:"number"},null,8,["modelValue"]),s(m,{text:"Note",modelValue:a(e).note,"onUpdate:modelValue":o[10]||(o[10]=t=>a(e).note=t)},null,8,["modelValue"]),u("div",re,[s(K,{checked:a(e).save_note,"onUpdate:checked":o[11]||(o[11]=t=>a(e).save_note=t),text:"Guardar en notas"},null,8,["checked"])]),u("div",le," Total: C$ "+f(g.value),1)]),actions:r(()=>[s(F,{onClick:o[12]||(o[12]=t=>p.$inertia.visit(p.route("dashboard.customers.index")))},{default:r(()=>[d(" Cancelar ")]),_:1}),s(V,{class:N({"opacity-25":a(e).processing}),disabled:a(e).processing},{default:r(()=>[d(" Guardar ")]),_:1},8,["class","disabled"])]),_:1})])]),_:1}))}};export{Ce as default};
