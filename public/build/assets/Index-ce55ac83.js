import{_ as w}from"./PrimaryButton-583d1cfb.js";import{_ as D}from"./SearchComponent-a9b7bf67.js";import{o,c as n,a as t,b as m,l as T,u as _,t as r,m as E,j as I,p as N,q as F,O as b,w as u,d as c,f as y,F as p,k as L,e as h,n as U}from"./app-21351d77.js";import{_ as O}from"./AppLayout-b799d88f.js";import{T as j}from"./TableSection-ae9a6086.js";import{_ as x}from"./UserInformation-59dfafab.js";import{c as A,D as B}from"./conceptIcons-90218363.js";import{_ as M}from"./DateColumn-a713a4cc.js";import{_ as v}from"./InputForm-d4040780.js";import{t as P}from"./toast-aa029f04.js";import{u as R}from"./notify-49e794d4.js";import{C as k}from"./Carbon-053ffa43.js";import{I as z}from"./IconTrash-57f2e6ac.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./helpers-90f267c8.js";import"./IconInfoCircle-83c3c44b.js";import"./sweetalert2.all-1861a797.js";const H={class:"flex gap-3 font-normal text-gray-900 items-center"},G={style:{"background-color":"#eef2ff",color:"#4f46e5"},class:"rounded-full h-10 w-10 flex items-center justify-center"},J={class:"text-sm"},K={class:"font-medium text-gray-700"},C={__name:"ConceptInformation",props:{concept:{type:Object,required:!0}},setup(d){return(l,s)=>(o(),n("div",H,[t("div",G,[(o(),m(T(_(A)[d.concept.name]??_(B))))]),t("div",J,[t("div",K,r(d.concept.name),1)])]))}},Q={class:"bg-indigo-100 border-l-4 border-indigo-600 text-indigo-600 p-4",role:"alert"},W={class:"px-3 py-4 flex gap-4"},X=t("th",null,"Transaccion",-1),Y=t("th",null,"Fecha",-1),Z=t("th",null,"Concepto",-1),ee=t("th",null,"Descripcion",-1),te=t("th",null,"Monto",-1),oe=t("th",null,"Total",-1),se=t("th",null,"Actions",-1),re={class:"hover:bg-gray-50"},ae={key:2,class:"font-normal text-gray-900"},ne={class:"font-medium text-gray-700"},le={key:0,class:"text-red-400 mt-1 text-xs"},ie={key:1,class:"text-gray-400"},de=["onClick"],ce={key:0},ue=t("td",{colspan:"6",class:"text-center"},"No data to display",-1),me=[ue],Ne={__name:"Index",props:{finances:{type:Object,required:!0},type:{type:String,required:!0},from_date:{type:String,required:!0},to_date:{type:String,required:!0}},setup(d){const l=d,s=E({from:l.from_date,to:l.to_date,search:""}),f=new URLSearchParams(window.location.search);f.get("search")&&(s.search=f.get("search"));const S=I(()=>l.finances.reduce((i,a)=>i+a.value*a.quantity,0));N(()=>[s.from,s.to],([i,a])=>{i&&a&&g()});const g=F.debounce(()=>{s.search||delete s.search,b.get(route("dashboard.finances.index",l.type),s,{preserveState:!0,preserveScroll:!0,only:["finances"]})},200),$=[{name:"Dashboard",route:"dashboard.index"},{name:{incomes:"Ingresos",expenditures:"Egresos"}[l.type],route:"dashboard.finances.index",params:l.type}];function q(i){R().confirm(()=>{b.delete(route("dashboard.finances.destroy",[l.type,i]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{P.success("Registro eliminado correctamente!")}})},"¿Estás seguro de eliminar este registro?")}function V(i){s.search=i,g()}return(i,a)=>(o(),m(O,{title:"Dashboard",breads:$},{default:u(()=>[c(j,null,{topbar:u(()=>[c(D,{onSearch:V}),c(w,{type:"button",onClick:a[0]||(a[0]=e=>i.$inertia.visit(i.route("dashboard.finances.create",d.type)))},{default:u(()=>[y(" Nuevo ")]),_:1})]),options:u(()=>[t("div",Q,[s.from==s.to?(o(),n(p,{key:0},[y(r(l.type=="incomes"?"Ingresos":"Egresos")+" de hoy: ",1)],64)):(o(),n(p,{key:1},[y(r(l.type=="incomes"?"Ingresos":"Egresos")+" desde "+r(_(k).create(s.from).format("d de F"))+" hasta el "+r(_(k).create(s.to).format("d de F"))+": ",1)],64)),y(" C$ "+r(S.value.toLocaleString()),1)]),t("div",W,[c(v,{modelValue:s.from,"onUpdate:modelValue":a[1]||(a[1]=e=>s.from=e),text:"Desde",type:"date",style:{width:"17rem"}},null,8,["modelValue"]),c(v,{modelValue:s.to,"onUpdate:modelValue":a[2]||(a[2]=e=>s.to=e),text:"Hasta",type:"date",style:{width:"17rem"}},null,8,["modelValue"])])]),header:u(()=>[X,Y,Z,ee,te,oe,se]),body:u(()=>[(o(!0),n(p,null,L(d.finances,(e,_e)=>(o(),n("tr",re,[t("td",null," #"+r(e.id),1),t("td",null,[c(M,{date:e.created_at},null,8,["date"])]),t("td",null,[e.incomeable?(o(),n(p,{key:0},[e.incomeable_type=="App\\Models\\Concept"?(o(),m(C,{key:0,concept:e.incomeable},null,8,["concept"])):(o(),m(x,{key:1,user:e.incomeable,type:e.incomeable_type},null,8,["user","type"]))],64)):e.expenditureable?(o(),n(p,{key:1},[e.expenditureable_type=="App\\Models\\Concept"?(o(),m(C,{key:0,concept:e.expenditureable},null,8,["concept"])):(o(),m(x,{key:1,user:e.expenditureable,type:e.expenditureable_type},null,8,["user","type"]))],64)):(o(),n("div",ae,r(e.concept),1))]),t("td",null,r(e.description),1),t("td",null,[t("div",ne," C$ "+r((e.value+(e.discount??0)).toLocaleString("en-US")),1),e.discount?(o(),n("div",le," -C$ "+r(e.discount.toLocaleString("en-US")),1)):h("",!0),e.quantity>1?(o(),n("div",ie," cant. "+r(e.quantity),1)):h("",!0)]),t("td",null,[t("span",{class:U([d.type=="incomes"?"badge-blue":"badge-danger"])}," C$ "+r((e.value*e.quantity).toLocaleString("en-US")),3)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:ye=>q(e.id)},[c(_(z))],8,de)])]))),256)),d.finances.length==0?(o(),n("tr",ce,me)):h("",!0)]),_:1})]),_:1}))}};export{Ne as default};
