import{_ as D}from"./PrimaryButton-275c7df4.js";import{_ as T}from"./SearchComponent-63c61f45.js";import{o,c as n,a as t,b as p,l as E,u as _,t as r,h as b,j as I,m as N,p as F,O as g,w as u,d as i,f as h,F as y,k as w,e as f,n as L}from"./app-255317fc.js";import{_ as U}from"./AppLayout-0cb1b585.js";import{T as O}from"./TableSection-7555a494.js";import{_ as v}from"./UserInformation-9c66db75.js";import{c as j,D as A}from"./conceptIcons-ec469305.js";import{_ as B}from"./DateColumn-efc708e0.js";import{_ as x}from"./InputForm-a774d690.js";import{t as M}from"./toast-44a1761e.js";import{u as z}from"./notify-02efa37d.js";import{C as k}from"./Carbon-053ffa43.js";import{I as H}from"./IconTrash-3aa68112.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./helpers-8795bc98.js";import"./IconInfoCircle-942748e4.js";import"./sweetalert2.all-ba9d370f.js";const R={class:"flex gap-3 font-normal text-gray-900 items-center"},G={style:{"background-color":"#eef2ff",color:"#4f46e5"},class:"rounded-full h-10 w-10 flex items-center justify-center"},J={class:"text-sm"},K={class:"font-medium text-gray-700"},C={__name:"ConceptInformation",props:{concept:{type:Object,required:!0}},setup(d){return(l,c)=>(o(),n("div",R,[t("div",G,[(o(),p(E(_(j)[d.concept.name]??_(A))))]),t("div",J,[t("div",K,r(d.concept.name),1)])]))}},P={class:"bg-indigo-100 border-l-4 border-indigo-600 text-indigo-600 p-4",role:"alert"},Q={class:"px-3 py-4 flex gap-4"},W=t("th",null,"Transaccion",-1),X=t("th",null,"Fecha",-1),Y=t("th",null,"Concepto",-1),Z=t("th",null,"Descripcion",-1),ee=t("th",null,"Monto",-1),te=t("th",null,"Total",-1),oe=t("th",null,"Actions",-1),se={class:"hover:bg-gray-50"},re={key:2,class:"font-normal text-gray-900"},ae={class:"font-medium text-gray-700"},ne={key:0,class:"text-red-400 mt-1 text-xs"},le={key:1,class:"text-gray-400"},de=["onClick"],ie={key:0},ce=t("td",{colspan:"6",class:"text-center"},"No data to display",-1),ue=[ce],Ne={__name:"Index",props:{finances:{type:Object,required:!0},type:{type:String,required:!0},from_date:{type:String,required:!0},to_date:{type:String,required:!0}},setup(d){const l=d,c=b(l.from_date),m=b(l.to_date),$=I(()=>l.finances.reduce((a,s)=>a+s.value*s.quantity,0));N(()=>[c.value,m.value],([a,s])=>{a&&s&&S(a,s)});const S=F.debounce((a,s)=>{g.get(route("dashboard.finances.index",l.type),{from:a,to:s},{preserveState:!0,preserveScroll:!0,only:["finances"]})},500),V=[{name:"Dashboard",route:"dashboard.index"},{name:{incomes:"Ingresos",expenditures:"Egresos"}[l.type],route:"dashboard.finances.index",params:l.type}];function q(a){z().confirm(()=>{g.delete(route("dashboard.finances.destroy",[l.type,a]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{M.success("Registro eliminado correctamente!")}})},"¿Estás seguro de eliminar este registro?")}return(a,s)=>(o(),p(U,{title:"Dashboard",breads:V},{default:u(()=>[i(O,null,{topbar:u(()=>[i(T,{url:a.route("dashboard.finances.index",d.type),only:["finances"]},null,8,["url"]),i(D,{type:"button",onClick:s[0]||(s[0]=e=>a.$inertia.visit(a.route("dashboard.finances.create",d.type)))},{default:u(()=>[h(" Nuevo ")]),_:1})]),options:u(()=>[t("div",P,[c.value==m.value?(o(),n(y,{key:0},[h(r(l.type=="incomes"?"Ingresos":"Egresos")+" de hoy: ",1)],64)):(o(),n(y,{key:1},[h(r(l.type=="incomes"?"Ingresos":"Egresos")+" desde "+r(_(k).create(c.value).format("d de F"))+" hasta el "+r(_(k).create(m.value).format("d de F"))+": ",1)],64)),h(" C$ "+r($.value.toLocaleString()),1)]),t("div",Q,[i(x,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),text:"Desde",type:"date",style:{width:"17rem"}},null,8,["modelValue"]),i(x,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=e=>m.value=e),text:"Hasta",type:"date",style:{width:"17rem"}},null,8,["modelValue"])])]),header:u(()=>[W,X,Y,Z,ee,te,oe]),body:u(()=>[(o(!0),n(y,null,w(d.finances,(e,me)=>(o(),n("tr",se,[t("td",null," #"+r(e.id),1),t("td",null,[i(B,{date:e.created_at},null,8,["date"])]),t("td",null,[e.incomeable?(o(),n(y,{key:0},[e.incomeable_type=="App\\Models\\Concept"?(o(),p(C,{key:0,concept:e.incomeable},null,8,["concept"])):(o(),p(v,{key:1,user:e.incomeable,type:e.incomeable_type},null,8,["user","type"]))],64)):e.expenditureable?(o(),n(y,{key:1},[e.expenditureable_type=="App\\Models\\Concept"?(o(),p(C,{key:0,concept:e.expenditureable},null,8,["concept"])):(o(),p(v,{key:1,user:e.expenditureable,type:e.expenditureable_type},null,8,["user","type"]))],64)):(o(),n("div",re,r(e.concept),1))]),t("td",null,r(e.description),1),t("td",null,[t("div",ae," C$ "+r((e.value+(e.discount??0)).toLocaleString("en-US")),1),e.discount?(o(),n("div",ne," -C$ "+r(e.discount.toLocaleString("en-US")),1)):f("",!0),e.quantity>1?(o(),n("div",le," cant. "+r(e.quantity),1)):f("",!0)]),t("td",null,[t("span",{class:L([d.type=="incomes"?"badge-blue":"badge-danger"])}," C$ "+r((e.value*e.quantity).toLocaleString("en-US")),3)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:ye=>q(e.id)},[i(_(H))],8,de)])]))),256)),d.finances.length==0?(o(),n("tr",ie,ue)):f("",!0)]),_:1})]),_:1}))}};export{Ne as default};
