import{_ as I}from"./DateColumn-81409add.js";import{_ as N}from"./DialogModal-b98b38c2.js";import{_ as p}from"./InputForm-daeecd40.js";import{_ as b}from"./PrimaryButton-cbad163b.js";import{_ as T}from"./SecondaryButton-369c6abe.js";import{T as U}from"./TableSection-0dcf2228.js";import{_ as w}from"./ThePaginator-16e396d2.js";import{_ as D}from"./AppLayout-95c26e89.js";import{u as E}from"./notify-44b7ac2c.js";import{t as y}from"./toast-523d5346.js";import{f as g,T as B,g as F,o as u,h as L,w as s,b as a,d as _,t as i,u as r,a as o,c as f,i as M,F as O,j as x,O as j}from"./app-3ea472c4.js";import{C as A}from"./Carbon-053ffa43.js";import{I as z}from"./IconPencil-0bce1737.js";import{I as G}from"./IconTrash-be9d1b56.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sweetalert2.all-435f180d.js";const P={class:"text-lg font-medium text-gray-900 mb-2"},H={class:"text-2xl font-extrabold text-gray-600"},J=o("th",null,"Fecha",-1),K=o("th",null,"Descripcion",-1),Q=o("th",null,"Monto",-1),R=o("th",null,"Total",-1),W=o("th",null,"Acciones",-1),X={class:"hover:bg-gray-50"},Y={class:"font-medium text-gray-700"},Z={key:0,class:"text-gray-400"},ee={class:"badge-success"},te={class:"flex gap-4"},oe=["onClick"],ae=["onClick"],se={key:0},ne=o("td",{colspan:"5",class:"text-center"}," No hay datos para mostrar ",-1),re=[ne],Ve={__name:"Index",props:{concept:{type:Object,required:!0},incomes:{type:Object,required:!0}},setup(d){const v=d,c=g(!1),m=g(!0),C=[{name:"Inicio",route:"dashboard.index"},{name:"Conceptos",route:"dashboard.concepts.index"},{name:v.concept.name,route:"dashboard.concepts.incomes.index",params:[v.concept.id]}],e=B({id:null,quantity:1,value:0,description:"",created_at:A.today(),incomeable_id:v.concept.id,incomeable_type:"App\\Models\\Concept"}),S=F(()=>(e.quantity*e.value).toLocaleString("en-US"));function V(l){e.id=l.id,e.quantity=l.quantity,e.value=l.value,e.description=l.description,m.value=!1,c.value=!0}function k(l){E().confirm(()=>{j.delete(route("dashboard.incomes.destroy",l),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y.success("Ingreso eliminado correctamente!")}})},"¿Estás seguro de eliminar este pago?")}function $(){m.value?e.post(route("dashboard.incomes.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y.success("Ingreso creado correctamente!"),h()}}):e.put(route("dashboard.incomes.update",e.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y.success("Ingreso actualizado correctamente!"),h()}})}function h(){e.reset(),m.value=!0,c.value=!1}return(l,n)=>(u(),L(D,{title:"Dashboard",breads:C},{default:s(()=>[a(N,{show:c.value},{title:s(()=>[_(i(m.value?"Nuevo":"Editar"),1)]),content:s(()=>[a(p,{text:"Descripción",name:"description",modelValue:r(e).description,"onUpdate:modelValue":n[0]||(n[0]=t=>r(e).description=t),autocomplete:"on"},null,8,["modelValue"]),a(p,{text:"Cantidad",name:"quantity",modelValue:r(e).quantity,"onUpdate:modelValue":n[1]||(n[1]=t=>r(e).quantity=t),type:"number"},null,8,["modelValue"]),a(p,{text:"Monto",name:"value",modelValue:r(e).value,"onUpdate:modelValue":n[2]||(n[2]=t=>r(e).value=t),type:"number"},null,8,["modelValue"]),a(p,{text:"Fecha",name:"created_at",modelValue:r(e).created_at,"onUpdate:modelValue":n[3]||(n[3]=t=>r(e).created_at=t),type:"date"},null,8,["modelValue"]),o("div",P," Total: C$ "+i(S.value),1)]),footer:s(()=>[a(T,{onClick:h},{default:s(()=>[_(" Cancelar ")]),_:1}),a(b,{type:"button",onClick:$},{default:s(()=>[_(" Guardar ")]),_:1})]),_:1},8,["show"]),a(U,null,{topbar:s(()=>[o("h2",H," Ingresos: "+i(d.concept.name),1),a(b,{type:"button",onClick:n[4]||(n[4]=t=>c.value=!0)},{default:s(()=>[_(" Nuevo ")]),_:1})]),header:s(()=>[J,K,Q,R,W]),body:s(()=>[(u(!0),f(O,null,M(d.incomes.data,(t,le)=>(u(),f("tr",X,[o("td",null,[a(I,{date:t.created_at},null,8,["date"])]),o("td",null,i(t.description),1),o("td",null,[o("div",Y," C$ "+i(t.value.toLocaleString("en-US")),1),t.quantity>1?(u(),f("div",Z," Cant. "+i(t.quantity),1)):x("",!0)]),o("td",null,[o("span",ee," C$ "+i((t.value*t.quantity).toLocaleString("en-US")),1)]),o("td",null,[o("div",te,[o("span",{tooltip:"Editar",role:"button",onClick:q=>V(t)},[a(r(z))],8,oe),o("span",{tooltip:"Eliminar",role:"button",onClick:q=>k(t.id)},[a(r(G))],8,ae)])])]))),256)),d.incomes.data.length==0?(u(),f("tr",se,re)):x("",!0)]),paginator:s(()=>[a(w,{links:d.incomes.links},null,8,["links"])]),_:1})]),_:1}))}};export{Ve as default};
