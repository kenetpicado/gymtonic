import{_ as U}from"./PrimaryButton-94aeb050.js";import{_ as w}from"./ThePaginator-8e0aa4a8.js";import{_ as D}from"./AppLayout-3d5fdcaa.js";import{T as I}from"./TableSection-3cf21849.js";import{_ as $}from"./UserInformation-675ebe4b.js";import{c as L,D as E}from"./conceptIcons-d2edcc6d.js";import{o,c as r,a as t,f as u,g as O,u as v,t as d,l as B,q as j,O as k,m as A,p as F,w as p,b as c,d as P,k as b,F as m,h as f,n as M}from"./app-2b27bfe8.js";import{_ as R}from"./DateColumn-e63953f8.js";import{_ as x}from"./InputForm-ef0d1477.js";import{t as z}from"./toast-b5501bcf.js";import{u as H}from"./notify-1872f6d9.js";import{_ as C}from"./CardInfo-f3c8eb24.js";import{I as G}from"./IconTrash-bc3e3da5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./helpers-846cda96.js";import"./IconInfoCircle-00bef524.js";import"./sweetalert2.all-a25a0e0f.js";const J={class:"flex gap-3 font-normal text-gray-900 items-center"},K={style:{"background-color":"#eef2ff",color:"#4f46e5"},class:"rounded-full h-10 w-10 flex items-center justify-center"},Q={class:"text-sm"},W={class:"font-medium text-gray-700"},S={__name:"ConceptInformation",props:{concept:{type:Object,required:!0}},setup(l){return(s,_)=>(o(),r("div",J,[t("div",K,[(o(),u(O(v(L)[l.concept.name]??v(E))))]),t("div",Q,[t("div",W,d(l.concept.name),1)])]))}},X={class:"text-2xl font-extrabold text-gray-600"},Y={class:"grid grid-cols-4 mb-1 gap-4"},Z={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-4"},ee=t("th",null,"Transaccion",-1),te=t("th",null,"Fecha",-1),oe=t("th",null,"Concepto",-1),se=t("th",null,"Descripcion",-1),ae=t("th",null,"Monto",-1),re=t("th",null,"Total",-1),le=t("th",null,"Actions",-1),ne={class:"hover:bg-gray-50"},de={key:2,class:"font-normal text-gray-900"},ie={class:"font-medium text-gray-700"},ce={key:0,class:"text-red-400 mt-1 text-xs"},ue={key:1,class:"text-gray-400"},pe=["onClick"],me={key:0},_e=t("td",{colspan:"7",class:"text-center"},"No data to display",-1),ye=[_e],Ie={__name:"Index",props:{data:{type:Object,required:!0},type:{type:String,required:!0},total:{type:Number,required:!0},plans:{type:Number,required:!1},concepts:{type:Object,required:!1}},setup(l){const s=l,_=new URLSearchParams(window.location.search),i=B({from:_.get("from")??null,to:_.get("to")??null,search:_.get("search")??"",type:s.type}),V=j.debounce(()=>{let n={...route().params,...i};for(const a in n)n[a]||delete n[a];k.get(route("dashboard.finances.index"),n,{preserveState:!0,preserveScroll:!0,only:["data","total","plans","concepts"]})},500);A(()=>i,V,{deep:!0});const y={incomes:"Ingresos",expenditures:"Egresos"},q=[{name:"Inicio",route:"dashboard.index"},{name:y[s.type],route:"dashboard.finances.index",params:{type:s.type}}];function N(n){H().confirm(()=>{k.delete(route(`dashboard.${s.type}.destroy`,n),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{z.success("Registro eliminado correctamente!")}})},"¿Estás seguro de eliminar este registro?")}const T=F(()=>[{title:"Total",value:`C$ ${s.total.toLocaleString()}`},{title:"Registros",value:`${s.data.total}`},{title:"Planes",value:`${s.plans}`}]);return(n,a)=>(o(),u(D,{title:y[s.type],breads:q},{default:p(()=>[c(I,null,{topbar:p(()=>[t("h1",X,d(y[s.type]),1),c(U,{type:"button",onClick:a[0]||(a[0]=e=>n.$inertia.visit(n.route("dashboard.finances.create",{type:s.type})))},{default:p(()=>[P(" Nuevo ")]),_:1})]),filters:p(()=>[t("div",Y,[c(x,{text:"Buscar",modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),type:"search"},null,8,["modelValue"]),c(x,{modelValue:i.from,"onUpdate:modelValue":a[2]||(a[2]=e=>i.from=e),text:"Desde",type:"date"},null,8,["modelValue"]),c(x,{modelValue:i.to,"onUpdate:modelValue":a[3]||(a[3]=e=>i.to=e),text:"Hasta",type:"date"},null,8,["modelValue"])]),t("div",Z,[(o(!0),r(m,null,b(T.value,e=>(o(),u(C,{stat:e},null,8,["stat"]))),256)),(o(!0),r(m,null,b(l.concepts.map(e=>{var h,g;return{title:((h=e.incomeable)==null?void 0:h.name)||((g=e.expenditureable)==null?void 0:g.name),value:e.total}}),e=>(o(),u(C,{stat:e},null,8,["stat"]))),256))])]),header:p(()=>[ee,te,oe,se,ae,re,le]),body:p(()=>[(o(!0),r(m,null,b(l.data.data,(e,h)=>(o(),r("tr",ne,[t("td",null," #"+d(e.id),1),t("td",null,[c(R,{date:e.created_at},null,8,["date"])]),t("td",null,[e.incomeable?(o(),r(m,{key:0},[e.incomeable_type=="App\\Models\\Concept"?(o(),u(S,{key:0,concept:e.incomeable},null,8,["concept"])):(o(),u($,{key:1,user:e.incomeable,type:e.incomeable_type},null,8,["user","type"]))],64)):e.expenditureable?(o(),r(m,{key:1},[e.expenditureable_type=="App\\Models\\Concept"?(o(),u(S,{key:0,concept:e.expenditureable},null,8,["concept"])):(o(),u($,{key:1,user:e.expenditureable,type:e.expenditureable_type},null,8,["user","type"]))],64)):(o(),r("div",de,d(e.concept),1))]),t("td",null,d(e.description),1),t("td",null,[t("div",ie," C$ "+d((e.value+(e.discount??0)).toLocaleString("en-US")),1),e.discount?(o(),r("div",ce," -C$ "+d(e.discount.toLocaleString("en-US")),1)):f("",!0),e.quantity>1?(o(),r("div",ue," cant. "+d(e.quantity),1)):f("",!0)]),t("td",null,[t("span",{class:M([l.type=="incomes"?"badge-blue":"badge-danger"])}," C$ "+d((e.value*e.quantity).toLocaleString("en-US")),3)]),t("td",null,[t("span",{tooltip:"Eliminar",role:"button",onClick:g=>N(e.id)},[c(v(G))],8,pe)])]))),256)),l.data.data.length==0?(o(),r("tr",me,ye)):f("",!0)]),paginator:p(()=>[c(w,{links:l.data.links},null,8,["links"])]),_:1})]),_:1},8,["title"]))}};export{Ie as default};
